{"ast":null,"code":"import _objectSpread from\"C:/Users/jacka/OneDrive/Documents/GitHub/test/round2MERN/pstudios/pstudios-landingpage/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import'../../styles/Admin.css';import API_BASE_URL from'../../config/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PortfolioList(){const[items,setItems]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{fetchItems();},[]);const fetchItems=async()=>{try{const response=await fetch(\"\".concat(API_BASE_URL,\"/api/admin/portfolio\"),{credentials:'include'});if(response.ok){const data=await response.json();setItems(data);}else{setError('Failed to fetch portfolio items');}}catch(error){setError('Network error');}finally{setLoading(false);}};const handleDelete=async(id,title)=>{if(!window.confirm(\"Are you sure you want to delete \\\"\".concat(title,\"\\\"?\"))){return;}try{const response=await fetch(\"\".concat(API_BASE_URL,\"/api/admin/portfolio/\").concat(id),{method:'DELETE',credentials:'include'});if(response.ok){setItems(items.filter(item=>item._id!==id));}else{setError('Failed to delete item');}}catch(error){setError('Network error');}};const togglePublished=async(id,currentStatus)=>{try{const response=await fetch(\"\".concat(API_BASE_URL,\"/api/admin/portfolio/\").concat(id),{method:'PATCH',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify({isPublished:!currentStatus})});if(response.ok){setItems(items.map(item=>item._id===id?_objectSpread(_objectSpread({},item),{},{isPublished:!currentStatus}):item));}else{setError('Failed to update item');}}catch(error){setError('Network error');}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading portfolio items...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"portfolio-list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"list-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Portfolio Management\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/portfolio/new\",className:\"add-button\",children:\"Add New Project\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"items-grid\",children:items.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"item-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:item.title}),/*#__PURE__*/_jsx(\"div\",{className:\"item-status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(item.isPublished?'published':'draft'),children:item.isPublished?'Published':'Draft'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"item-type\",children:item.type}),/*#__PURE__*/_jsx(\"span\",{className:\"item-date\",children:new Date(item.createdAt).toLocaleDateString()})]}),item.tags&&item.tags.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"item-tags\",children:item.tags.map((tag,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"tag\",children:tag},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>togglePublished(item._id,item.isPublished),className:\"toggle-button \".concat(item.isPublished?'unpublish':'publish'),children:item.isPublished?'Unpublish':'Publish'}),/*#__PURE__*/_jsx(Link,{to:\"/admin/portfolio/\".concat(item._id,\"/edit\"),className:\"edit-button\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(item._id,item.title),className:\"delete-button\",children:\"Delete\"})]})]},item._id))}),items.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"No portfolio items found.\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/portfolio/new\",className:\"add-button\",children:\"Add Your First Project\"})]})]});}export default PortfolioList;","map":{"version":3,"names":["React","useState","useEffect","Link","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","PortfolioList","items","setItems","loading","setLoading","error","setError","fetchItems","response","fetch","concat","credentials","ok","data","json","handleDelete","id","title","window","confirm","method","filter","item","_id","togglePublished","currentStatus","headers","body","JSON","stringify","isPublished","map","_objectSpread","className","children","to","type","Date","createdAt","toLocaleDateString","tags","length","tag","index","onClick"],"sources":["C:/Users/jacka/OneDrive/Documents/GitHub/test/round2MERN/pstudios/pstudios-landingpage/src/admin/portfolio/PortfolioList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport '../../styles/Admin.css';\r\nimport API_BASE_URL from '../../config/api';\r\n\r\nfunction PortfolioList() {\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchItems();\r\n  }, []);\r\n\r\n  const fetchItems = async () => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/api/admin/portfolio`, {\r\n        credentials: 'include',\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setItems(data);\r\n      } else {\r\n        setError('Failed to fetch portfolio items');\r\n      }\r\n    } catch (error) {\r\n      setError('Network error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id, title) => {\r\n    if (!window.confirm(`Are you sure you want to delete \"${title}\"?`)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/api/admin/portfolio/${id}`, {\r\n        method: 'DELETE',\r\n        credentials: 'include',\r\n      });\r\n\r\n      if (response.ok) {\r\n        setItems(items.filter(item => item._id !== id));\r\n      } else {\r\n        setError('Failed to delete item');\r\n      }\r\n    } catch (error) {\r\n      setError('Network error');\r\n    }\r\n  };\r\n\r\n  const togglePublished = async (id, currentStatus) => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/api/admin/portfolio/${id}`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        credentials: 'include',\r\n        body: JSON.stringify({ isPublished: !currentStatus }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        setItems(items.map(item => \r\n          item._id === id \r\n            ? { ...item, isPublished: !currentStatus }\r\n            : item\r\n        ));\r\n      } else {\r\n        setError('Failed to update item');\r\n      }\r\n    } catch (error) {\r\n      setError('Network error');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading portfolio items...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"portfolio-list\">\r\n      <div className=\"list-header\">\r\n        <h1>Portfolio Management</h1>\r\n        <Link to=\"/admin/portfolio/new\" className=\"add-button\">\r\n          Add New Project\r\n        </Link>\r\n      </div>\r\n\r\n      {error && <div className=\"error-message\">{error}</div>}\r\n\r\n      <div className=\"items-grid\">\r\n        {items.map((item) => (\r\n          <div key={item._id} className=\"item-card\">\r\n            <div className=\"item-header\">\r\n              <h3>{item.title}</h3>\r\n              <div className=\"item-status\">\r\n                <span className={`status-badge ${item.isPublished ? 'published' : 'draft'}`}>\r\n                  {item.isPublished ? 'Published' : 'Draft'}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"item-meta\">\r\n              <span className=\"item-type\">{item.type}</span>\r\n              <span className=\"item-date\">\r\n                {new Date(item.createdAt).toLocaleDateString()}\r\n              </span>\r\n            </div>\r\n\r\n            {item.tags && item.tags.length > 0 && (\r\n              <div className=\"item-tags\">\r\n                {item.tags.map((tag, index) => (\r\n                  <span key={index} className=\"tag\">{tag}</span>\r\n                ))}\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"item-actions\">\r\n              <button\r\n                onClick={() => togglePublished(item._id, item.isPublished)}\r\n                className={`toggle-button ${item.isPublished ? 'unpublish' : 'publish'}`}\r\n              >\r\n                {item.isPublished ? 'Unpublish' : 'Publish'}\r\n              </button>\r\n              \r\n              <Link to={`/admin/portfolio/${item._id}/edit`} className=\"edit-button\">\r\n                Edit\r\n              </Link>\r\n              \r\n              <button\r\n                onClick={() => handleDelete(item._id, item.title)}\r\n                className=\"delete-button\"\r\n              >\r\n                Delete\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {items.length === 0 && (\r\n        <div className=\"empty-state\">\r\n          <p>No portfolio items found.</p>\r\n          <Link to=\"/admin/portfolio/new\" className=\"add-button\">\r\n            Add Your First Project\r\n          </Link>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PortfolioList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}