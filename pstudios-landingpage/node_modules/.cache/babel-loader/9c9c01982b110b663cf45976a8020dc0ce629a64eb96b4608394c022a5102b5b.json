{"ast":null,"code":"import React,{useState}from'react';import'../../styles/Admin.css';import API_BASE_URL from'../../config/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MediaUploader(_ref){let{itemId,onUploadSuccess,onUploadComplete}=_ref;const[uploading,setUploading]=useState(false);const[error,setError]=useState('');const[dragActive,setDragActive]=useState(false);const handleFileUpload=async file=>{console.log('Starting file upload:',file.name,'to item:',itemId);setUploading(true);setError('');const formData=new FormData();formData.append('media',file);formData.append('alt',file.name);try{console.log('Sending request to:',\"\".concat(API_BASE_URL,\"/api/admin/portfolio/\").concat(itemId,\"/media\"));const response=await fetch(\"\".concat(API_BASE_URL,\"/api/admin/portfolio/\").concat(itemId,\"/media\"),{method:'POST',credentials:'include',body:formData});console.log('Response status:',response.status);const data=await response.json();console.log('Response data:',data);if(response.ok){// Call the success callback instead of reloading\nif(onUploadSuccess){onUploadSuccess(data.media);}// Call the complete callback to refetch media\nif(onUploadComplete){onUploadComplete();}setError('');// Clear any previous errors\nconsole.log('Upload successful');}else{setError(data.error||'Upload failed');console.error('Upload failed:',data.error);}}catch(error){console.error('Upload error:',error);setError('Network error');}finally{setUploading(false);}};const handleFileSelect=e=>{const file=e.target.files[0];if(file){handleFileUpload(file);}};const handleDrag=e=>{e.preventDefault();e.stopPropagation();if(e.type==='dragenter'||e.type==='dragover'){setDragActive(true);}else if(e.type==='dragleave'){setDragActive(false);}};const handleDrop=e=>{e.preventDefault();e.stopPropagation();setDragActive(false);const file=e.dataTransfer.files[0];if(file){handleFileUpload(file);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"media-uploader\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"upload-area \".concat(dragActive?'drag-active':''),onDragEnter:handleDrag,onDragLeave:handleDrag,onDragOver:handleDrag,onDrop:handleDrop,children:/*#__PURE__*/_jsxs(\"div\",{className:\"upload-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"upload-icon\",children:\"\\uD83D\\uDCC1\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Upload Media\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Drag and drop files here, or click to select\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*,video/*,.glb\",onChange:handleFileSelect,disabled:uploading,style:{display:'none'},id:\"media-upload\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"media-upload\",className:\"upload-button\",children:uploading?'Uploading...':'Choose File'})]})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Supported file types:\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"Images: JPEG, PNG, WebP\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Videos: MP4\"}),/*#__PURE__*/_jsx(\"li\",{children:\"3D Models: GLB\"})]}),/*#__PURE__*/_jsx(\"p\",{children:\"Maximum file size: 50MB\"})]})]});}export default MediaUploader;","map":{"version":3,"names":["React","useState","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","MediaUploader","_ref","itemId","onUploadSuccess","onUploadComplete","uploading","setUploading","error","setError","dragActive","setDragActive","handleFileUpload","file","console","log","name","formData","FormData","append","concat","response","fetch","method","credentials","body","status","data","json","ok","media","handleFileSelect","e","target","files","handleDrag","preventDefault","stopPropagation","type","handleDrop","dataTransfer","className","children","onDragEnter","onDragLeave","onDragOver","onDrop","accept","onChange","disabled","style","display","id","htmlFor"],"sources":["C:/Users/jacka/OneDrive/Documents/GitHub/test/round2MERN/pstudios/pstudios-landingpage/src/admin/portfolio/MediaUploader.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport '../../styles/Admin.css';\r\nimport API_BASE_URL from '../../config/api';\r\n\r\nfunction MediaUploader({ itemId, onUploadSuccess, onUploadComplete }) {\r\n  const [uploading, setUploading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [dragActive, setDragActive] = useState(false);\r\n\r\n  const handleFileUpload = async (file) => {\r\n    console.log('Starting file upload:', file.name, 'to item:', itemId);\r\n    setUploading(true);\r\n    setError('');\r\n\r\n    const formData = new FormData();\r\n    formData.append('media', file);\r\n    formData.append('alt', file.name);\r\n\r\n    try {\r\n      console.log('Sending request to:', `${API_BASE_URL}/api/admin/portfolio/${itemId}/media`);\r\n      const response = await fetch(`${API_BASE_URL}/api/admin/portfolio/${itemId}/media`, {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        body: formData,\r\n      });\r\n\r\n      console.log('Response status:', response.status);\r\n      const data = await response.json();\r\n      console.log('Response data:', data);\r\n\r\n      if (response.ok) {\r\n        // Call the success callback instead of reloading\r\n        if (onUploadSuccess) {\r\n          onUploadSuccess(data.media);\r\n        }\r\n        // Call the complete callback to refetch media\r\n        if (onUploadComplete) {\r\n          onUploadComplete();\r\n        }\r\n        setError(''); // Clear any previous errors\r\n        console.log('Upload successful');\r\n      } else {\r\n        setError(data.error || 'Upload failed');\r\n        console.error('Upload failed:', data.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Upload error:', error);\r\n      setError('Network error');\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleFileSelect = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      handleFileUpload(file);\r\n    }\r\n  };\r\n\r\n  const handleDrag = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (e.type === 'dragenter' || e.type === 'dragover') {\r\n      setDragActive(true);\r\n    } else if (e.type === 'dragleave') {\r\n      setDragActive(false);\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setDragActive(false);\r\n\r\n    const file = e.dataTransfer.files[0];\r\n    if (file) {\r\n      handleFileUpload(file);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"media-uploader\">\r\n      <div\r\n        className={`upload-area ${dragActive ? 'drag-active' : ''}`}\r\n        onDragEnter={handleDrag}\r\n        onDragLeave={handleDrag}\r\n        onDragOver={handleDrag}\r\n        onDrop={handleDrop}\r\n      >\r\n        <div className=\"upload-content\">\r\n          <div className=\"upload-icon\">üìÅ</div>\r\n          <h3>Upload Media</h3>\r\n          <p>Drag and drop files here, or click to select</p>\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*,video/*,.glb\"\r\n            onChange={handleFileSelect}\r\n            disabled={uploading}\r\n            style={{ display: 'none' }}\r\n            id=\"media-upload\"\r\n          />\r\n          <label htmlFor=\"media-upload\" className=\"upload-button\">\r\n            {uploading ? 'Uploading...' : 'Choose File'}\r\n          </label>\r\n        </div>\r\n      </div>\r\n\r\n      {error && <div className=\"error-message\">{error}</div>}\r\n\r\n      <div className=\"upload-info\">\r\n        <h4>Supported file types:</h4>\r\n        <ul>\r\n          <li>Images: JPEG, PNG, WebP</li>\r\n          <li>Videos: MP4</li>\r\n          <li>3D Models: GLB</li>\r\n        </ul>\r\n        <p>Maximum file size: 50MB</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MediaUploader;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}